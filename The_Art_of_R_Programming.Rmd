---
title: "The_Art_of_R_Programming"
output: word_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

# µÚÒ»ÕÂ ¿ìËÙÈëÃÅ±Ê¼Ç
1. index(Ë÷Òı)/subscript(ÏÂ±ê),ÀûÓÃ[]Ìá¹©Ë÷Òı£¬´Ó1¿ªÊ¼Ë÷Òı¡£
2. ÇóÓàÊı·ûºÅ %%,Óë³£¹æµÄ%²»Í¬¡£
3. ¶¨ÒåÒ»¸öº¯Êı£ºº¯ÊıÃû <- function(ÊäÈë){}
4. forÑ­»·Óï·¨£ºfor(Ìõ¼ş){}
5. ifÓï·¨£ºif(Ìõ¼ş){}
6. º¯Êı·µ»ØÖµ£ºreturn(·µ»ØÖµ)
7. RÓïÑÔ±à³ÌµÄ½äÂÉÖ®Ò»ÊÇ¾¡¿ÉÄÜ±ÜÃâÊ¹ÓÃÑ­»·£¬Èç¹û²»ÄÜ£¬¾ÍÈÃÑ­»·¾¡Á¿¼ò½à£¬for(n in x){n...}Óëfor(i in 1:length(x)){x[i]}Á½¸öÓï¾äÊÇÒ»ÑùµÄĞ§¹û£¬µ«ºóÕßĞèÒªµ÷ÓÃlength()ÇÒÃ¿´Î¶¼ĞèÒªµ÷ÓÃË÷Òı£¬Òò´Ë²»¹»¼ò½à¡£
8. Rº¯ÊıÖĞµÄÊµ²ÎºÍĞÎ²Î(formal argument,formal parament)ÓëC++ÀàËÆ£¬Í¬Ê±±äÁ¿µÄ×÷ÓÃÓòÒ²¿ÉÒÔ²Î¿¼C++¡£
9. Rº¯ÊıÖĞÒ²¿ÉÒÔÉèÖÃÄ¬ÈÏ²ÎÊı£¬¼´ÔÚº¯Êı¶¨ÒåÊ±¸ø±äÁ¿¸³Ä¬ÈÏÖµ£¬Èçfunction(x,y=2,z=TRUE){}





```{r Nile}
Nile#å†…ç½®çš„æ•°æ®é›†ï¼ŒåŒ…å«å°¼ç½—æ²³æ°´æµé‡çš„æ•°æ®
mean(Nile)#è®¡ç®—å‡å€?
sd(Nile)#è®¡ç®—æ ‡å‡†å·?
hist(Nile)#ç»˜åˆ¶ç›´æ–¹å›?
hist(Nile,breaks = 12)#å¯ä»¥é€šè¿‡è®¾ç½®breakæ”¹å˜åˆ†ç»„
```
```{r }
#å‡½æ•°å…¥é—¨ï¼Œå‡½æ•°æ˜¯ä¸€ç»„æŒ‡ä»¤çš„é›†åˆï¼Œç”¨äºè¯»å–è¾“å…¥ã€æ‰§è¡Œè®¡ç®—ã€è¿”å›ç»“æ?
oddcounter <- function(x){ #å®šä¹‰ä¸€ä¸ªå‡½æ•°ï¼šå‡½æ•°å? <- function(è¾“å…¥)
  counter <- 0 #å®šä¹‰ä¸€ä¸ªè¿”å›å˜é‡?
  for (i in x){#forå¾ªç¯è¯­æ³•ï¼šfor(æ¡ä»¶){}
    if(i%%2 == 1){#ifè¯­æ³•ï¼šif(æ¡ä»¶){}
      counter <- counter + 1
    }
  }
  return(counter)#è¿”å›å€?
}
oddcounter(c(1,3,5,2,5,4,4,8))
y <- c(1,3,5,2,5,4,5,8)
oddcounter(y)
```
# ç¬¬äºŒç«? å‘é‡(vector)
æœ¬ç« ä¼šé‡ç‚¹å…³æ³?*å¾ªç¯è¡¥é½*ã€?*ç­›é€?*ã€?*å‘é‡åŒ?*
1. åœ¨Rä¸­ï¼Œæ•°å­—å®é™…ä¸Šè¢«å½“ä½œä¸€å…ƒå‘é‡ã€?
2. Rè¯­è¨€ä¸­å˜é‡ç±»å‹ç§°ä¸ºæ¨¡å¼?(mode),åŒä¸€å‘é‡ä¸­çš„æ‰€æœ‰å…ƒç´ å¿…é¡»æ˜¯ç›¸åŒçš„æ¨¡å¼ã€?
3. Rä¸­å‘é‡æ˜¯è¿ç»­å­˜å‚¨çš?(ä¸Cè¯­è¨€ç±»ä¼¼)ï¼Œå› æ­¤ä¸èƒ½æ’å…¥æˆ–åˆ é™¤å…ƒç´ ï¼Œåªèƒ½é‡æ–°ç»™å‘é‡è¿›è¡Œèµ‹å€¼ã€?*Rä¸­çš„å‘é‡åæœ¬è´¨ä¸Šæ˜¯ä¸€ä¸ªæŒ‡é’ˆï¼Œé‡èµ‹å€¼æ˜¯å°†æŒ‡é’ˆæŒ‡å‘æ–°å‘é‡çš„æ–¹å¼å®ç°çš„*ã€?
4. length()è·å–å‘é‡é•¿åº¦ï¼?*å½“å‘é‡ä¸ºç©ºæ—¶ï¼Œlength()è¿”å›0ï¼?1:length()ä¼šè¿”å›?1:0ï¼Œç”¨seq()æ›¿ä»£1ï¼šlength()å¯ä»¥é¿å…*ã€?
5. çŸ©é˜µä¸ºæŒ‰åˆ—å­˜å‚¨çš„å‘é‡ã€?
6. å¾ªç¯è¡¥é½ï¼Œå½“ä¸¤ä¸ªå‘é‡è¿ç®—æ—¶ï¼ŒRä¼šè‡ªåŠ¨å¯¹é•¿åº¦è¾ƒçŸ­çš„å‘é‡è¿›è¡Œé‡å¤è¡¥é½ï¼Œç¡®ä¿è¿ç®—çš„ä¸¤ä¸ªå‘é‡é•¿åº¦ä¸€æ ·ã€?
7. å¸¸ç”¨çš„å‘é‡è¿ç®—ï¼Œé€šå¸¸æ˜¯å…ƒç´ å’Œå…ƒç´ çš„è¿ç®—ï¼Œä¸æ˜¯çº¿æ€§ä»£æ•°ä¸­çš„å‘é‡è¿ç®—ï¼Œå°¤å…¶æ˜¯ä¹˜æ³?(*)ã€?
8. å‘é‡ç´¢å¼•ï¼Œé€‰æ‹©ç‰¹å®šç´¢å¼•çš„å…ƒç´ æ„æˆæ–°çš„å­å‘é‡ï¼?-ä»£è¡¨å‰”é™¤æŸå‡ ä¸ªå…ƒç´ ã€?
9. **è¿ç®—ç¬¦å­˜åœ¨ä¼˜å…ˆçº§ï¼Œä¸Cç±»ä¼¼ï¼Œä¾‹å¦‚ï¼šçš„ä¼˜å…ˆçº§é«˜äº-,1:k-1å®é™…ç­‰ä»·äº?(1:k)-1è€Œä¸æ˜?1:(k-1)ã€?**
10. seq(from = , to = , by = )ç”Ÿæˆç­‰å·®æ•°åˆ—ã€?
11. rep(x,times,lenth,each)ï¼Œtimeså¯ä»¥ä¸ºå•ä¸ªå€¼æˆ–ä¸xé•¿åº¦ç›¸åŒçš„æ•´æ•°å‘é‡ï¼Œå½“timesä¸ºå•ä¸ªå€¼æ—¶å³å°†æ•´ä¸ªxä½œä¸ºæ•´ä½“è¿›è¡Œé‡å¤ï¼Œå½“timesä¸ºlength(x)çš„æ•´æ•°å‘é‡æ—¶x[i]å°†ä¼šè¢«é‡å¤times[i]æ¬¡ï¼›each = k ç­‰ä»·äº? times = rep(k,length(x))ï¼Œå³æ¯ä¸ªå…ƒç´ éƒ½é‡å¤äº†kæ¬¡ã€?
12. any(),all()åˆ†åˆ«ä¸ºå…¶ä¸­è‡³å°‘ä¸€ä¸ªæˆ–å…¨éƒ¨ä¸ºTRUEï¼?*å¯ä»¥æé«˜åˆ¤æ–­æ•ˆç‡*ã€?
13. å‘é‡åŒ–è¿ç®—ç¬¦ï¼Œå½“å¸Œæœ›å¯¹å‘é‡ä¸­çš„æ¯ä¸€ä¸ªå…ƒç´ éƒ½è¿›è¡Œç›¸åŒæ“ä½œæ—¶ï¼Œå¸Œæœ›ç›´æ¥å¯¹xè°ƒç”¨f(),æ—¢ç®€åŒ–ä»£ç åˆèƒ½åˆ©ç”¨Rçš„å‘é‡åŒ–æé«˜æ‰§è¡Œæ•ˆç‡ã€?
13-1. å‘é‡è¾“å…¥å‘é‡è¾“å‡ºï¼Œä¹‹å‰æ¥è§¦çš„+,-,*,/,%%,^,>,<å‡ä¸ºæ­¤ç±»å‘é‡åŒ–è¿ç®—ï¼›
13-2. å‘é‡è¾“å…¥çŸ©é˜µè¾“å‡ºï¼Œsapply(x,f)--simplify apply å¯¹æ¯ä¸€ä¸ªxä¸­çš„å…ƒç´ éƒ½è°ƒç”¨fï¼Œå¹¶å°†ç»“æœè½¬åŒ–ä¸ºçŸ©é˜µã€?
14. NAä¸ºç¼ºå¤±å€?(å¯ä»¥é€šè¿‡na.rm=TRUEå¿½ç•¥NAå€?)ï¼ŒNULLä¸ºä¸å­˜åœ¨çš„å€?(ç”¨äºåœ¨å¾ªç¯ä¸­åˆ›å»ºå‘é‡ä½œä¸ºæŒ‡é’ˆåˆå§‹å­˜æ”¾åœ°ç‚¹)ã€?
15. ç­›é€?(filtering)
15-1. ç”¨x[é€»è¾‘è¡¨è¾¾å¼],æ— æ³•å‰”é™¤NAå€?;
15-2. ç”¨subset(x,é€»è¾‘è¡¨è¾¾å¼?),å¯ä»¥å‰”é™¤NAå€?;
15-3. which(é€»è¾‘è¡¨è¾¾å¼?)ï¼Œè¿”å›ä¸ºæ‰€æœ‰TRUEçš„å…ƒç´ ç´¢å¼•ã€?
16. å‘é‡åŒ–çš„ifelse(b,u,v)ï¼Œè‹¥é€»è¾‘è¡¨è¾¾å¼bä¸­å…ƒç´ ä¸ºTRUEæ—¶å¯¹åº”ä½ç½®è¿”å›uï¼Œè‹¥bä¸­å…ƒç´ åˆ¤æ–­ä¸ºFALSEå¯¹åº”ä½ç½®è¿”å›vã€?
17. æµ‹è¯•å‘é‡ç›¸ç­‰ï¼?==ä¸ºä¸€ä¸ªå‘é‡åŒ–ç¬¦å·å³å¯¹æ¯ä¸ªå…ƒç´ éƒ½è¿›è¡Œåˆ¤æ–­æ˜¯å¦ç›¸ç­‰ï¼Œå› æ­¤æ— æ³•ç”¨äºä¸¤ä¸ªå‘é‡ä¹‹é—´æ˜¯å¦ç›¸åŒçš„åˆ¤æ–­ï¼Œå¯ä»¥åˆ©ç”¨all(x==y)ï¼Œä½†æ•ˆç‡ä¸Šä¸å¦‚identical(x,y)ã€?*æ³¨æ„ï¼šidentical()è¦æ±‚ä¸¤ä¸ªå¯¹è±¡å®Œå…¨ä¸€è‡´ï¼Œå³ä½¿æ•°å€¼ä¸€æ ·ä½†ä¸¤ä¸ªç±»å‹ä¸åŒä¹Ÿä¸å¯ä»¥ï¼?1:2 ä¸ç­‰äº? c(1,2),å› ä¸ºc(1,2)ä¸ºdoubleç±»å‹ï¼?1:2ä¸ºint*


```{r}
#3 æ’å…¥éœ€è¦é‡æ–°èµ‹å€?
x <- c(88,5,12,13)
x
x <- c(x[1:3],168,x[4]);x

#3 åˆ é™¤ä¹Ÿéœ€è¦é‡æ–°èµ‹å€?
x <- c(x[1:3],x[5]);x

#6-1 å¾ªç¯è¿ç®—
x <- c(1,2,4) + c(6,0,9,20,22);x
#6-2 å¾ªç¯è¿ç®—,çŸ©é˜µå®é™…ä¸ºå‘é‡ï¼Œå°†c(1,2)å¾ªç¯è¡¥å……ï¼Œå¹¶è½¬ä¸ºçŸ©é˜µå½¢å¼mat(c(1,2,1,2,1,2),nrow = nrow(x), ncol = ncol(x)),ç„¶åå†ä¸xçš„æ¯ä¸ªå…ƒç´ è¿›è¡Œè®¡ç®—ã€?
x <- matrix(1:6, nrow = 3, ncol = 2);x
y <- x + c(1,2);y
nrow(x)

#7 å‘é‡è¿ç®—
x <- c(1,2,4)
x + c(5,0,-1)
x * c(5,0,-1) #æ­¤å¤„çš?*ä¸ºå…ƒç´ ä¹‹é—´è¿ç®?
x / c(5,4,-1) #æ­¤å¤„çš?/ä¸ºå…ƒç´ ä¹‹é—´è¿ç®?
x %% c(5,4,-1) #ä¾æ—§ä¸ºå…ƒç´ ä¹‹é—´è¿ç®?

#8 å‘é‡ç´¢å¼•
y <- 1:9 -0.3;y
y[1:3]
y[c(1,1,2)]#å¯ä»¥é‡å¤æŸä¸ªå…ƒç´ 
y[-1]#å‰”é™¤ç¬¬ä¸€ä¸ªå…ƒç´?
y[-c(1,2)]#å‰”é™¤ 1ï¼?2ä¸¤ä¸ªå…ƒç´ 
y[-length(y)]#å‰”é™¤æœ€åä¸€ä¸ªå…ƒç´?

#9 è¿ç®—ç¬¦çš„ä¼˜å…ˆçº?
1:3-1#:çš„ä¼˜å…ˆçº§é«˜äº-ï¼Œæ‰€ä»¥ä¸º(1:3)-1
1:(3-1)#ç­‰ä»·äº?1:2ï¼Œä¸ä¸Šå¼ä¸åŒ

#10 seq(from , to, by ) ç”Ÿæˆç­‰å·®æ•°åˆ—ï¼Œé²æ£’æ€§è¾ƒå¥?(seq(NULL)è®°ä¸º0 æ¯?1ï¼šlength(x)å¯é¿å…?1:0çš„æƒ…å†µâ€”â€”å…ˆæ‰§è¡Œ1ï¼Œä½†å®é™…æ˜¯è¦æ±‚ä¸æ‰§è¡Œï¼Œæ­¤å¤„ä¹Ÿæ˜¯Cè¯­è¨€ç­‰ä»0å¼€å§‹ç´¢å¼•å¯ä»¥é¿å…çš„ä¸€ä¸ªé—®é¢?)
seq(from=1, to=4 , by=0.2)
seq(NULL)

#11 rep(x, times, length, each),å¯¹xä¸­çš„ç¬¬iä¸ªå…ƒç´ é‡å¤times[i]æ¬?
rep(x=c(1,2,3),times=3)#å½“timesä¸?1å…ƒå‘é‡æ—¶ï¼Œåˆ™repå°†xä¹Ÿå½“ä½œä¸€ä¸ªå•ç‹¬çš„å‘é‡å…ƒç´ æ¥è¿›è¡Œé‡å¤?
rep(x=c(1,2,3),times=3,length=5)#lengthä¸ºæˆªè‡³é•¿åº?
rep(x=c(1,2,3),times=c(3,3,3))
rep(x=c(1,2,3),each=3)#each æ˜¯å¯¹æ¯ä¸ªå…ƒç´ éƒ½è¿›è¡Œé‡å¤ï¼Œä¸ä¸Šä¸€ä¸ªè¡¨è¾¾å¼æ•ˆæœç›¸åŒ

#11 any(x),all(x)åˆ¤æ–­xåŒ…å«çš„TRUEæƒ…å†µ
x <- 1:9-0.6
any(x>6)
all(x>6)
seq(x)-2
seq(x-2)
1:(length(x)-2)

findrun<- function(x,k,m){
  #æ‰¾å‡ºè¿ç»­kä¸ªå€¼å‡ä¸ºmçš„ç¼–å?
  #rlt <- NULL #æ„å»ºå­˜å‚¨ç»“æœçš„å‘é‡?,æ–¹ä¾¿ä½†æ˜¯æ¯æ¬¡éƒ½éœ€è¦é‡æ–°ä¸ºc(rlt,i)åˆ†é…ä¸€æ¬¡å†…å­˜æ¯”è¾ƒå½±å“é€Ÿåº¦
  n <- length(x)
  rlt <- vector(length = n)
  count <- 1
  for(i in 1:(n-k+1)){
    #if(all(x[i:i+k-1]==m)) {rlt<- c(rlt,i)}
    if(all(x[i:(i+k-1)]==m)) {
      
      rlt[count] <- i
      count <- count + 1}
  }
  return(rlt)
}
x <- rep(x=c(1,3,2),length=8,each=3);x
findrun(x,4,2)
findrun(c(1,1, 1, 3, 3, 3, 2, 2),3,2)


#15 ç­›é€‰ï¼Œx[é€»è¾‘è¡¨è¾¾å¼],subset(x,é€»è¾‘è¡¨è¾¾å¼?)
x <- c(6,1:3,NA,12)
x[x>5]
subset(x,x>5)
#which(é€»è¾‘è¡¨è¾¾å¼?),è¿”å›ç¬¦åˆé€»è¾‘è¡¨è¾¾å¼çš„å…ƒç´ çš„ç´¢å¼?
which(x>5)

#16 å‘é‡åŒ–çš„ifelse(b,u,v)
x <- 1:10
y <- ifelse(x%%2==1,"Yes","No")
y

#17 identical(x,y)åˆ¤æ–­å‘é‡xå’Œå‘é‡yæ˜¯å¦ç›¸åŒ
x <- c(1,2,3)
x_1 <- c(1,NA,3)
y <- c(1,NA,3)
x == y
all(x==y)#å½“å­˜åœ¨NAå€¼æ˜¯allè¿”å›çš„å‡ä¸ºNA(ä¸ç®¡ä¸¤ä¸ªå‘é‡æ˜¯å¦ä¸€è‡?)
all(x_1 ==y )#å½“å­˜åœ¨NAå€¼æ˜¯allè¿”å›çš„å‡ä¸ºNA(ä¸ç®¡ä¸¤ä¸ªå‘é‡æ˜¯å¦ä¸€è‡?)
all(x==y,na.rm = T)#åªæœ‰è®¾ç½®na.rm=Tæ‰å¯ä»¥å¿½ç•¥NAå€¼ï¼Œå¯¹å…¶ä»–å…ƒç´ è¿›è¡Œåˆ¤è¯?
identical(x,y)
identical(x_1,y)#å¯ä»¥å¯¹NAä¸NAè¿›è¡Œæ¯”è¾ƒ
```

# ç¬¬ä¸‰ç«? çŸ©é˜µå’Œæ•°ç»?
1. *çŸ©é˜µ(matrix)*æ˜¯ä¸€ç§ç‰¹æ®Šçš„å‘é‡ï¼ŒåŒ…å«ä¸¤ä¸ªé™„åŠ çš„å±æ€?(è¡Œæ•°å’Œåˆ—æ•?)ï¼Œå…¶ä½™å±æ€§ä¸ä¸€èˆ¬çš„å‘é‡ä¸€è‡´ã€?
2. *æ•°ç»„(array)*æ˜¯Rä¸­æ›´ä¸€èˆ¬çš„å¯¹è±¡ï¼Œå¯ä»¥æ˜¯å¤šç»´çš„ï¼ŒçŸ©é˜µä¸ºæ•°ç»„çš„ä¸€ä¸ªç‰¹æ®Šå½¢å¼ã€?
3-1. çŸ©é˜µåˆ›å»ºï¼Œåœ¨Rä¸­çŸ©é˜µæŒ‰åˆ—å­˜å‚¨ï¼Œè¡Œå’Œåˆ—çš„ä¸‹æ ‡å‡ä»1å¼€å§‹ï¼Œåˆ›å»ºæ–¹æ³•å¯matrix(c(),nrow=,ncol=);
3-2. å¦‚æœéœ€è¦æŒ‰è¡Œå­˜å‚¨ï¼Œå¯ä»¥è®¾ç½®byrow=Tï¼?
3-3. y[,col]ä»£è¡¨ç´¢å¼•ç¬¬colåˆ—çš„æ•°æ®ï¼?
4. çŸ©é˜µçš„çº¿æ€§ä»£æ•°è¿ç®—ï¼ŒçŸ©é˜µç›¸ä¹˜ã€çŸ©é˜µæ•°é‡ä¹˜æ³•ã€çŸ©é˜µç›¸åŠ ã€?
5. çŸ©é˜µç´¢å¼•ä¸å‘é‡ç´¢å¼•æ–¹æ³•ä¸€è‡´ï¼Œåªæ˜¯å¤šäº†æŒ‰è¡Œç´¢å¼•å’ŒæŒ‰åˆ—ç´¢å¼•ã€?
6. &è¿ç®—ç¬¦ä¸ºå‘é‡çš„é€»è¾‘ä¸è¿ç®—ï¼Œ&&è¿ç®—ç¬¦ç”¨äºifè¯­å¥çš„æ ‡é‡é€»è¾‘ä¸è¿ç®—ã€?
7. row(m)ï¼Œè¿”å›ä¸€ä¸ªå¤§å°ä¸mä¸€è‡´çš„çŸ©é˜µï¼Œå¯¹åº”ä½ç½®çš„å€¼ä¸ºè¯¥å€¼åœ¨mä¸­çš„è¡Œæ•°ï¼›col(m)ç±»ä¼¼ã€?
8. apply(m, dimcode, f, fargs),å…è®¸ç”¨æˆ·åœ¨çŸ©é˜µçš„å„è¡Œæˆ–å„åˆ—ä¸Šè°ƒç”¨æŒ‡å®šçš„å‡½æ•°ã€?*apply()è¿™ç±»å‡½æ•°å¹¶ä¸ä¼šåŠ é€Ÿç¨‹åºï¼Œä½†ä¾¿äºé˜…è¯»å’Œä¿®æ”¹ï¼Œå¹¶ä¸”é¿å…äº§ç”Ÿä½¿ç”¨å¾ªç¯è¯­å¥å¯èƒ½å¸¦æ¥çš„bugï¼ŒåŒæ—¶ä¹Ÿæ˜¯åº”ç”¨æ–¹å‘ï¼Œå¯ä»¥åˆ†é…åˆ°å¤šä¸ªç½‘ç»œèŠ‚ç‚¹è®¡ç®—ã€?*
9. å¢åŠ æˆ–åˆ é™¤çŸ©é˜µçš„è¡Œæˆ–åˆ—ï¼Œå¯ä»¥é€šè¿‡é‡æ–°èµ‹å€¼çš„æ–¹å¼å®ç°ã€‚å¢åŠ è¡Œæˆ–åˆ—ä¹Ÿå¯ä»¥è°ƒç”¨rbind(),cbind()ï¼?*ä½†ç›¸å½“äºé‡æ–°åˆ›å»ºä¸€ä¸ªçŸ©é˜µï¼Œé€Ÿåº¦è¾ƒæ…¢ï¼Œæœ€å¥½æ˜¯å…ˆåˆ›å»ºä¸€ä¸ªå¤§çš„ç©ºçŸ©é˜µ*ã€?
10. matrix ç›¸æ¯”äºvectorå¤šäº†è¡Œæ•°å’Œåˆ—æ•°çš„å±æ€?(dim)ã€?
11. é¿å…æ„å¤–é™ç»´(å¯¹çŸ©é˜µæ“ä½œè¿”å›äº†é•¿åº¦ä¸ºNçš„å‘é‡è€Œä¸æ˜?1Ã—Nçš„çŸ©é˜µæˆ–NÃ—1çš„çŸ©é˜?)ï¼Œå¯ä»¥é€šè¿‡è®¾ç½®drop=Falseæ¥é¿å…é™ç»´ã€?
12. çŸ©é˜µçš„è¡Œå’Œåˆ—çš„å‘½åï¼Œcolnames(matrix) <- c()

```{r}
#3-1 åˆ›å»ºçŸ©é˜µï¼Œé»˜è®¤æŒ‰åˆ—å­˜å‚?  
y <- matrix(data = c(1,2,3,4),nrow = 2);y
#3-2 ç‰¹å®šè¦æ±‚æŒ‰è¡Œå­˜å‚¨çŸ©é˜µ
y <- matrix(data = c(1,2,3,4), nrow = 2, byrow = TRUE);y
#3-3 å–æŸä¸€åˆ—æˆ–æŸä¸€è¡Œçš„æ•°æ®y[row,] y[,col]
y[,1];y[1,]

#4 çŸ©é˜µçº¿æ€§ä»£æ•°è¿ç®?
y <- matrix(data = c(1,2,3,4),nrow = 2);y
#4-1 çŸ©é˜µç›¸ä¹˜
y %*% y
#4-2 çŸ©é˜µä¹˜é‡ä¹˜æ³•
3*y
#4-3 çŸ©é˜µåŠ æ³•
y+y

#5 çŸ©é˜µæ“ä½œå®ä¾‹
library(pixmap)
logo <- read.pnm("C:/Users/wangjk/Documents/R/win-library/3.3/pixmap/pictures/logo.pgm")
plot(logo)
str(logo)
#logo@greyç°åº¦çŸ©é˜µ
class(logo@grey)
logo_1 <- logo
logo_1@grey[40:50,20:30] <- 1
plot(logo_1)
logo_2 <- logo
logo_2@grey[40:50,] <- 1
plot(logo_2)

rows <- 84:163;cols <- 135:177
lrows <- length(rows);lcols <- length(cols)
randomnoise <- matrix(nrow = lrows,ncol = lcols, runif(lrows*lcols))
logo_3 <- logo
#logo_3@grey <- 0.3*logo@grey + 0.7*randomnoise

#6 &ä¸è¿ç®?
m <- matrix(c(5,2,9,-1,10,11),nrow = 3);m
m[m[,1]>2&m[,2]<2,]

#7 row() å’? col()å‡½æ•°ä½¿ç”¨
m;row(m)
col(m)
col(m) == row(m)
ifelse(row(m) == col(m), 1, -1)

#8 apply(m, dimcode, f, fargs),å…è®¸ç”¨æˆ·åœ¨çŸ©é˜µçš„å„è¡Œæˆ–å„åˆ—ä¸Šè°ƒç”¨æŒ‡å®šçš„å‡½æ•?

#8-1 åˆ©ç”¨mean()å’Œapply()
z <- matrix(1:6, nrow = 3);z
apply(z, 1, mean) #æŒ‰è¡Œdimcode=1 æ±‚å¹³å‡å€?
apply(z, 1, min)  #æŒ‰è¡Œæ±‚æœ€å°å€?
apply(z, 2, mean) # æŒ‰åˆ—æ±‚å¹³å‡å€?
# f()è¿”å›çš„ä¸ºæ ‡é‡(å•å…ƒç´ å‘é‡?)ï¼Œapply()çš„ç»“æœä¸ºä¸€ä¸ªå‘é‡?*è€ŒéçŸ©é˜µ*

#8-2 è‡ªå®šä¹‰å‡½æ•°f
f <- function(x) x/c(2,8) #æ¯è¡Œéƒ½é™¤c(2,8)
y <- apply(z, 1, f);y  #yä¸ºä¸€ä¸?2Ã—3çš„çŸ©é˜µï¼Œç”±äºapply()åœ¨è®¡ç®—æ—¶å…ˆæŠŠç¬¬ä¸€è¡Œçš„ç»“æœè¾“å‡ºä¸ºç»“æœä¸­çš„ç¬¬ä¸€åˆ—ã€‚å¦‚æœæ‰€è°ƒç”¨çš„fè¿”å›çš„æ˜¯ä¸€ä¸ªåŒ…å«kä¸ªå…ƒç´ çš„å‘é‡ï¼Œé‚£ä¹ˆapply()çš„ç»“æœå°±æœ‰kè¡Œã€?
y <- t(apply(z, 1, f));y #t()ä¸ºè½¬ç½®å‡½æ•?

#8-3 apply()çš„f()åŒ…å«å¤šä¸ªå˜é‡æ—¶ï¼Œéœ€è¦åœ¨apply()è°ƒç”¨æ—¶å°†é¢å¤–çš„å‚æ•°åˆ—åœ¨å‡½æ•°åå­—åé¢ï¼Œç”¨é€—å·éš”å¼€ã€?
copymaj <- function(rw, d){
  maj <- sum(rw[1:d]) / d
  return(ifelse(maj > 0.5, 1, 0))
}
x <- matrix(c(1,1,1,0,0,1,0,1,1,1,0,1,1,1,1,1,0,0,1,0),nrow = 4);x
apply(x, 1, copymaj, 3)

#8-4 æ‰¾å‡ºæ¯è¡Œä¸­è·ç¦»ä¸­ä½æ•°æœ€å¤§çš„å€¼findol,å¸¸ç”¨äºå¼‚å¸¸å€¼åˆ¤æ–?
rs <- matrix(runif(15,0,3),nrow = 3);rs
findol <- function(xrow){
  mdn <- median(xrow)
  devs <- abs(xrow - mdn)
  return(which.max(devs))
}
apply(rs, 1, findol)

#9 åˆ©ç”¨rbind(),cbind()
z
cbind(1,z)
rbind(1,z)

#9-2 æ‰¾å‡ºæœ€çŸ­è·ç¦?
mind <- function(d){
  n <- nrow(d)
  dd <- cbind(d,1:n)
  wmins <- apply(dd[-n,], 1, imin)
  
  i <- which.min(wmins[2,])
  j <- wmins[1,i]
  
  return(c(d[i,j],i,j))
  
}

imin <- function(x){
  lx <- length(x)
  i <- x[lx]#åŸçŸ©é˜µçš„è¡Œæ•°
  j <- which.min(x[(i+1):(lx-1)])#å¯¹ç§°çŸ©é˜µï¼Œä¸”å¯¹è§’çº¿å…ƒç´ ä¸º0ï¼Œéœ€è¦æ’é™?0çš„å½±å“?
  return(c(i+j,x[i+j]))
}

q <- matrix(nrow = 5, ncol = 5)
q[1,] <- c(0,12,13,8,20)
q[2,] <- c(12,0,15,28,88)
q[3,] <- c(13,15,0,6,9)
q[4,] <- c(8,28,6,0,33)
q[5,] <- c(20,88,9,33,0)
q
mind(q)

#10 çŸ©é˜µä¸å‘é‡çš„åŒºåˆ«
z <- matrix(1:8, nrow = 4)
length(z)#å‘é‡å¯ä»¥è°ƒç”¨length()
class(z)
attributes(z)#å› æ­¤ä¸ºS3ç±»ï¼Œè¡Œæ•°å’Œåˆ—æ•°ä½œä¸ºmatrix çš„å±æ€§å¯ä»¥ç›´æ¥ç”¨nrow()å’Œncol()è¯»å–ï¼Œæˆ–è€…dim(z)ä½†ä¸å¯ä»¥z$dim
dim(z)

#11 é¿å…æ„å¤–é™ç»´
rz <- z[1,] 
class(rz)
attributes(rz)#rz ä¸ºä¸€ä¸ªå‘é‡?
rzdrop <- z[1,,drop=FALSE];attributes(rzdrop)#è¿”å›çŸ©é˜µ1Ã—2
#ä¹Ÿå¯ä»¥é€šè¿‡as.matrixå°†å…¶è½¬ä¸ºçŸ©é˜µï¼ŒæŒ‰ç…§å‘é‡è½¬çŸ©é˜µçš„æ–¹å¼æŒ‰åˆ—è½¬æ?
rz <- z[1,];rz;rz <- as.matrix(rz,nrow=1,ncol=2);rz<-t(rz);attributes(rz)
rz <- as.matrix(rz);attributes(rz)#

#12 çŸ©é˜µè¡Œå’Œåˆ—çš„å‘½å
colnames(z) <- c("a","b")
rownames(z) <- c("11","12","13","14")
z[c("11","12"),"a"]
```
#4 åˆ—è¡¨(list)
ä»æŠ€æœ¯ä¸Šè®²ï¼Œåˆ—è¡¨å°±æ˜¯å‘é‡ï¼Œå±äºé€’å½’å?(recursive)å‘é‡ã€?
1. åˆ›å»ºåˆ—è¡¨,åˆ—è¡¨å„ç»„ä»¶çš„åç§°å«åšæ ‡ç­¾(tag) ;ä¹Ÿå¯ä»¥ç”¨vector(mode="list")åˆ›å»ºåˆ—è¡¨ã€?
2. åˆ—è¡¨å¸¸è§„æ“ä½œ
2-1 åˆ—è¡¨ç´¢å¼•ï¼Œç¬¬ä¸€ç±»é‡‡ç”?*$æˆ–è€…[[æ•°å­—/tag]]*ï¼Œè¿”å›çš„æ˜¯ç»„ä»¶tagçš„æ•°æ®ç±»å‹ï¼›ç¬¬äºŒç§?*[tag]*ï¼Œè¿”å›çš„æ˜¯åŸåˆ—è¡¨çš„å­åˆ—è¡¨
2-2 å¢åŠ æˆ–åˆ é™¤åˆ—è¡¨å…ƒç´?,å¢åŠ ç›´æ¥lst$addele <- ,åˆ é™¤lst$deltar <- NULLï¼Œå¤šä¸ªlistä¹Ÿå¯ä»¥ç”¨c()è¿›è¡Œè¿æ¥ã€?
2-3 è·å–åˆ—è¡¨é•¿åº¦ï¼Œå³è·å–ç»„ä»¶ä¸ªæ•°.
3. è®¿é—®åˆ—è¡¨å…ƒç´ å’Œå€¼ï¼Œunlist()è¿”å›ä¸€ä¸ªå‘é‡ï¼ŒåŸæœ¬åˆ—è¡¨ä¸­çš„æ ‡ç­¾è½¬ä¸ºå…ƒç´ åï¼Œå€¼è½¬ä¸ºå‘é‡ï¼Œä¸åŒç±»å‹å€¼åŒæ—¶å­˜åœ¨äºä¸€ä¸ªåˆ—è¡¨æ—¶ï¼ŒæŒ‰ç…§ä¼˜å…ˆçº§ä½çš„è¿›è¡Œå‘é‡è½¬åŒ–NULL<raw<é€»è¾‘ç±»å‹<æ•´å‹<å®æ•°ç±»å‹<å¤æ•°ç±»å‹<åˆ—è¡¨<è¡¨è¾¾å¼ã€?
4. åˆ é™¤å‘é‡çš„å…ƒç´ åï¼Œå¯é€šè¿‡names(vector) <- NULL æˆ–unname(vector)ã€?
5. 

```{r}
#1 åˆ›å»ºåˆ—è¡¨
j <- list(name="Joe", salary=55000, union=T)
j$name;j$sal;j$un#tagå¯ä»¥ç®€å†?
#2-1 åˆ—è¡¨ç´¢å¼•
z <- vector(mode = "list");z[["abc"]] <- 3;z
j[['name']];j[[1]];class(j[[1]])##[[]]è¿”å›nameå€¼å¯¹åº”çš„æ•°æ®ç±»å‹
j[1];class(j[1])#[]è¿”å›åŸåˆ—è¡¨ä¸­çš„ç¬¬iä¸ªå­åˆ—è¡¨

#2-2 å¢åŠ æˆ–åˆ é™¤åˆ—è¡¨å…ƒç´ ï¼Œå¢åŠ ç›´æ¥lst$addele <- ,åˆ é™¤lst$deltar <- NULL
j$age <- 34;j[[5]]<-25000;j#å¢åŠ å…ƒç´ 
j[[5]] <- NULL;j#åˆ é™¤ç¬?5å„å…ƒç´?

#2-3 è·å–ç»„ä»¶ä¸ªæ•°
length(j)
names(j)

#3 åˆ©ç”¨unlist()è¿”å›å‘é‡
ulj <- unlist(j)
class(ulj)
ulj
#4 åˆ©ç”¨unname()åˆ é™¤å‘é‡ä¸­çš„å…ƒç´ å?
ulju <- unname(ulj);ulju
ulj

#5 é€’å½’åˆ—è¡¨(recursive)ï¼Œåˆ—è¡¨çš„ç»„ä»¶è¿˜æ˜¯åˆ—è¡¨ï¼Œå¯ä»¥é€šè¿‡è®¾ç½®recursive = FALSE(é»˜è®¤)å¾—åˆ°ä¸€ä¸ªé€’å½’åˆ—è¡¨ 
c(list(a=1,b=2,c=list(d=5,e=9)))
c(list(a=1,b=2,c=list(d=5,e=9)),recursive=TRUE)#è¿”å›ä¸€ä¸ªä¸åŒ…å«åˆ—è¡¨ç»„ä»¶çš„åˆ—è¡¨ï¼Œä½†å…ƒç´ åä¿ç•™äº†é€’å½’çš„æ•ˆæ?

```

#5 æ•°æ®æ¡?(data.frame)
æ•°æ®æ¡†ç±»ä¼¼äºçŸ©é˜µï¼Œæœ‰è¡Œå’Œåˆ—ä¸¤ä¸ªç»´åº¦ï¼Œä½†æ•°æ®æ¡†çš„æ¯ä¸€åˆ—å¯ä»¥æ˜¯ä¸åŒçš„æ¨¡å¼?(mode)ï¼›åŒæ—¶æ•°æ®æ¡†ä¹Ÿå¯ä»¥è®¤ä¸ºæ˜¯æ¯ä¸ªç»„ä»¶é•¿åº¦éƒ½ç›¸ç­‰çš„åˆ—è¡¨ã€?
1. åˆ›å»ºæ•°æ®æ¡†data.frame()ã€?
2. è®¿é—®æ•°æ®æ¡†ï¼Œæ—¢å¯ä»¥å‚è€ƒlistçš„æ–¹å¼ä¹Ÿå¯ä»¥å‚è€ƒmatrixçš„æ–¹å¼ã€?

```{r}
#1 åˆ›å»ºæ•°æ®æ¡†ï¼ŒstringsAsFactorsè®¾ç½®å°†å‘é‡è½¬ä¸ºå› å­çš„å‚æ•°ï¼Œå› å­factoråœ¨åç»­æ¶‰åŠã€?
kids <- c("Jack","Jill");ages <- c(12,10)
d <- data.frame(kids, ages, stringsAsFactors = FALSE);d

#2 è®¿é—®æ•°æ®æ¡?
d[[1]]#listçš„ç´¢å¼•å€¼æ–¹å¼ï¼Œå› ä¸ºkidsåœ¨listä¸­ä¸ºç¬¬ä¸€ä¸ªç»„ä»?
d$kids#listç»„ä»¶åæ–¹å¼?
d[,1]#ä¸¾è¯åˆ—ç´¢å¼•æ–¹å¼?
#å¯ä»¥ç”¨str()æŸ¥çœ‹data.frameå†…éƒ¨ç»“æ„
str(d)

mode(d$kids)
mode(d[[1]])
mode(d[,1])

#é€šå¸¸Rä¼šè¯»å–csvæ ¼å¼æ•°æ®åˆ°data.frameæ ¼å¼æ•°æ®
examsquiz <- read.csv("E:/20 R/exams.csv",header = TRUE);head(examsquiz)
```




